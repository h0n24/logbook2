"use strict";var shouldBypassModal=!1;chrome.runtime.onMessage.addListener((function(o,e,s){"BY_PASS_MODAL"===o.type&&(shouldBypassModal=!0,console.log("Background script set shouldBypassModal to true"),s({acknowledged:!0}))})),chrome.webNavigation.onCreatedNavigationTarget.addListener((function(o){console.log("New window or tab opened:",o),o.url&&o.url.includes("https://fsx1.itstep.org/api/v1/files")?shouldBypassModal?(console.log("Bypassing modal, initiating download"),shouldBypassModal=!1,chrome.downloads.download({url:o.url},(function(o){chrome.runtime.lastError?console.error("Download failed:",chrome.runtime.lastError.message):console.log("Download initiated with ID:",o)})),chrome.tabs.remove(o.tabId)):(chrome.tabs.remove(o.tabId),chrome.tabs.sendMessage(o.sourceTabId,{type:"NEW_WINDOW_OPENED",tabId:o.tabId,url:o.url})):console.log("New tab opened with URL:",o.url)}));